## 코드 커버리지

* 코드 커버리지 조사를 위해 [coverage](https://pypi.org/project/coverage/) 툴을 제공한다.
* CI 툴에서 테스트를 수행할 때 같이 설정하기를 추천하지만, <font color="orange">가끔 잘 못 분석하는 경우도 있다.</font>

### 코드 커버리지 도구 설정

* pytest에서 커버리지를 조사하려면 pytest-cov 패키지를 설치한다.
* 커버리지를 조사할 때는 다음과 같이 인자를 주어 pytest를 실행한다.

``` bash
pytest \
  --cov-report term-missing \
  --cov=ch8.coverage.coverage_1 
  test_coverage_1.py
```

* 테스트 결과
  * 테스트가 얼마나 많은 코드를 커버하고 있는지를 출력한다.
  * 테스트가 커버하지 않은 라인의 수와 %를 출력한다.
* 하지만, 높은 커버리지가 높은 신뢰도를 의미하지는 않는다.


### 코드 커버리지 사용 시 주의사항

* 파이썬은 인터프리트 방식의 언어이다. 테스트가 수행되는 동안 실행되는 라인을 식별해서 커버리지를 측정한다.
* 어떤 라인이 테스트를 통과했다고 해서, 그 라인에 들어오는 모든 입력에 대해 안전하다는 것을 보증하지는 않는다. 이것은 어떤 언어를 써서 코딩을 하더라도 마찬가지이다. 테스트한 데이터에 대해서 안전하다는 것이지 데이터의 조합이 바뀔 경우 안전하다는 것을 보장하지는 않는다.

